pipeline {
                agent any
                tools{
                           jdk  "JAVA_HOME"
	      maven "maven"
              
        
                           }

                 

              stages {
        
                             stage("cleanup workspace"){

                                         steps{
                                                     cleanWs()
                                                    }
                                       }
                                         stage("Checkout from SCM"){
            steps {
                git branch: 'master', credentialsId: 'github', url: 'https://github.com/habeel143341/linuxhello.git'
            }
            }
                                        
                                        stage("Build Application"){
            steps {
                sh "mvn clean package"
            }

        }

        stage("Test Application"){
            steps {
                sh "mvn test"
            }

        }

        stage("Build & Push Docker Image") {
            steps {
                script {
                    sh 'docker build -t habeel143341/hello-habeelmaven .'
                    }

                   
                }
            }

        }
                               

                            
              

                                 
              }      
                            
            
        
    
          
